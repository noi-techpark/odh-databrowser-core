@{
    ViewBag.Title = "Accommodation Search";
}
@section jumbotronsect {
    <h3>Accommodation Search</h3>
}

@section infomodaltext {
    <h2>Accommodation Search</h2>
    <p>All data is syncronized daily from LTS TIC Web Interface.</p>
    <p>The availability Information is requested on the HGV MSS Interfaces. The MSS Interfaces checks the booking portals Booking Suedtirol, Booking.com (at the moment not available), Hotel.de, Expedia.</p>
    <p></p>
}

<div class="col-sm-12" ng-app="accommodation" ng-controller="accommodationListController" ng-init="init('Accommodation','@ViewBag.predefinedlocationfilter','@ViewBag.predefinedlocationfiltertyp')">
    <div class="splash" ng-show="isloading">
        <h2>
            Loading
        </h2>
        <span>
            <i class="fa fa-spinner fa-5x fa-spin active"></i>
        </span>
    </div>
    <div class="row">
        <div class="col-sm-12 form-inline">

            <div class="pull-right">
                <span class="btn btn-default" ng-show="onlinecount > 0">available online: {{onlinecount}}</span>
                <span class="btn btn-default" ng-show="onlinecountlcs > 0">available lts: {{onlinecountlcs}}</span>
                <span class="btn btn-default" ng-show="onlinecount == 0 && onlinecountlcs == 0">No Accommodation available online</span>
                <div ng-hide="onlinecount >= 0 || onlinecountlcs > 0">
                    <span class="btn btn-default" ng-hide="onlinecount > 0"> found: {{ totalcount }} Elements</span>
                    <input type="button" id="prevpage" ng-click="changePage(-1,true)" class="btn btn-info" value="prev" ng-disabled="page == 1" />
                    &nbsp;{{ page }}&nbsp;/&nbsp;{{ totalpages }}&nbsp;
                    <input type="button" id="nextpage" ng-click="changePage(+1,true)" class="btn btn-info" value="next" ng-disabled="page == totalpages || totalpages == 0" />
                </div>
            </div>

            <div class="pull-left" ng-click="changeLanguage()">
                <div class="btn-group">
                    @*<button type="button" class="btn btn-default active" ng-click="setlang('de')">de</button>
                        <button type="button" class="btn btn-default" ng-click="setlang('it')">it</button>
                        <button type="button" class="btn btn-default" ng-click="setlang('en')">en</button>*@
                    <label class="btn btn-default" ng-model="lang" btn-radio="'de'">de</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'it'">it</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'en'">en</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'nl'">nl</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'cs'">cs</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'pl'">pl</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'fr'">fr</label>
                    <label class="btn btn-default" ng-model="lang" btn-radio="'ru'">ru</label>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-sm-12 table-bordered filtertablehorizontal">
            <div class="row">
                <div class="form-inline">
                    <div class="col-sm-2 form-group">
                        <h5>Reisedatum</h5>
                        @*<input type="text" id="datefrom" class="form-control" placeholder="Von" style="width:100%" /><br />*@

                        <div class="input-group" ng-controller="DatepickerDemoCtrl">
                            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="$parent.Datumvon" is-open="opened" datepicker-options="dateOptions" ng-change="changeDate($parent.Datumvon)" @*min-date=" '2010-01-01' " max-date=" '2015-06-22' " datepicker-options=" dateoptions" date-disabled="disabled(date, mode)" *@ ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </div>

                        @*<input type="text" id="dateTo" class="form-control" placeholder="Bis" style="width:100%" />*@

                        <div class="input-group" ng-controller="DatepickerDemoCtrl">
                            <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="$parent.Datumbis" is-open="opened" datepicker-options="dateOptions" @*min-date="'2010-01-01'" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)"*@ ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </div>

                        <br /><br />
                    </div>
                    <div class="col-sm-2 form-group">
                        <h5>Verpflegungsart</h5>
                        <select class="form-control" id="selectBoardType" ng-model="boardfilter" style="width:100%">
                            <option value="0" selected>alle</option>
                            <option value="1">ohne Verpflegung</option>
                            <option value="2">Frühstück</option>
                            <option value="4">Halbpension</option>
                            <option value="8">Vollpension</option>
                            <option value="16">All Inclusive</option>
                        </select>
                    </div>
                    <div class="col-sm-1 form-group">
                        <h5>Zimmer</h5>
                        <select class="form-control" id="selectRooms" ng-model="roomcount" style="width:100%" ng-change="updateroomselection(roomcount)">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <div class="col-sm-7 form-group">
                        @*<table>
                                <tr>
                                    <td>

                                    </td>
                                </tr>
                            </table>*@


                        <h5>Zimmertyp</h5>
                        <div ng-repeat="a in roomnumber() track by $index">
                            <select class="form-control" id="selectRoomType" ng-model="roomtype[$index]" style="width:40%">
                                <option value="0" selected>Zimmer/Ferienwohnung</option>
                                <option value="1">Zimmer</option>
                                <option value="2">Ferienwohnung</option>
                            </select>

                            <select class="form-control" id="selectPersons" ng-model="persons[$index]" style="width:30%" ng-change="updatepersonselection($index,roomtype[$index], persons[$index])">
                                <option value="0" selected>Personen</option>
                                <option value="1">1 Person</option>
                                <option value="2">2 Personen</option>
                                <option value="3">3 Personen</option>
                                <option value="4">4 Personen</option>
                                <option value="5">5 Personen</option>
                                <option value="6">6 Personen</option>
                                <option value="7">7 Personen</option>
                                <option value="8">8 Personen</option>
                                <option value="9">9 Personen</option>
                                <option value="10">10 Personen</option>
                            </select>

                            <ul class="list-group" style="width:30%;">
                                <li class="list-group-item" ng-repeat="b in personnumber($index) track by $index">

                                    <select class="form-control" id="selectRoomType{{ $index + 1 }}" ng-model="roompersons[$parent.$index].persons[$index]">
                                        <option value="null" selected>Alter Personen</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18+</option>
                                    </select>
                                </li>
                            </ul>

                        </div>

                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="pull-left">
                        <div class="btn-group">
                            <label class="btn btn-default" ng-model="checkBookFilter.hgv" btn-checkbox>Booking Südtirol</label>
                            <label class="btn btn-default" ng-model="checkBookFilter.bok" btn-checkbox>Booking.com</label>
                            <label class="btn btn-default" ng-model="checkBookFilter.htl" btn-checkbox>Hotel.de</label>
                            <label class="btn btn-default" ng-model="checkBookFilter.exp" btn-checkbox>Expedia</label>
                            @*<label class="btn btn-default" ng-model="checkBookFilter.lts" btn-checkbox>LTS</label>*@
                        </div>
                    </div>

                    <label class="btn btn-default" ng-model="checkonlts" btn-checkbox>LTS Availability Check</label>

                    <input type="button" id="availabilitybutton" ng-click="getAvailability()" class="btn btn-info pull-right" value="Verfügbarkeit prüfen" /><br /><br />
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-sm-3 table-bordered filtertable">
            <div class="form-inline">
                <div class="form-group col-sm-12">
                    @*<h4>Filters</h4>*@
                    <br />
                    <input type="button" id="filterbutton" ng-click="applyFilter()" class="btn btn-info" value="Filter" />
                    <input type="button" id="clearfilterbutton" ng-click="clearFilter()" class="btn btn-default" value="Clear" />
                </div>

                <div class="form-group col-sm-12" ng-controller="HotelnameTypeAheadController">
                    <h6>Accommodation Name<small class="btn-link pull-right" ng-click="clearNameFilter()">Clear</small></h6>
                    <typeaheadhotel items="hotelitems" templateurl="AccoNameTemplate" prompt="Hotelname" title="name" model="$parent.SelectedAccoName" idmodel="$parent.SelectedAccoId" on-select="onItemSelected()" />
                </div>

                <div class="form-group col-sm-12" ng-controller="LocationTypeAheadController">
                    <h6>Location<small class="btn-link pull-right" ng-click="clearLocationFilter()">Clear</small></h6>
                    <typeaheadloc items="locitems" templateurl="LocationNameTemplate" prompt="Location" title="name" subtitle="typ" model="$parent.SelectedLocationName" submodel="$parent.SelectedLocationTyp" idmodel="$parent.SelectedLocationId" on-select="onItemSelected()" />
                </div>            

                <div class="form-group col-sm-12">

                    <h6>Typ<small class="btn-link pull-right" ng-click="clearTypeFilter()">Clear</small></h6>
                    <select class="form-control" id="selectAccoType" ng-model="typefilter" style="width:100%">
                        <option value="null" selected>alle</option>
                        <option value="1">Hotel &amp; Pension</option>
                        <option value="2">Bed &amp; Breakfast</option>
                        <option value="4">Urlaub auf dem Bauernhof</option>
                        <option value="8">Camping</option>
                        <option value="16">Jugendherberge</option>
                        <option value="32">Schutzhütten &amp; Berggasthöfe</option>
                        <option value="64">Ferienwohnungen</option>
                    </select>
                </div>

                <div class="form-group col-sm-12" ng-controller="SmgTagNameTypeAheadController">
                    <h6>ODH Tag<small class="btn-link pull-right" ng-click="clearTagFilter()">Clear</small></h6>
                    <typeaheadsmgtag items="items" templateurl="SmgTagNameTemplate" prompt="Name" title="name" model="$parent.SelectedSmgTagName" idmodel="$parent.SelectedSmgTagId" on-select="onItemSelected()" />
                </div>

                <div class="form-group col-sm-12">
                    <h6>active on source<small class="btn-link pull-right" ng-click="clearTICActiveFilter()">Clear</small></h6>
                    <select class="form-control" id="selectTyp" ng-model="active">
                        <option value="null">all</option>
                        <option value="true">active</option>
                        <option value="false">not active</option>
                    </select>
                </div>

                <div class="form-group col-sm-12">
                    <h6>active in ODH<small class="btn-link pull-right" ng-click="clearActiveFilter()">Clear</small></h6>
                    <select class="form-control" id="selectTyp" ng-model="smgactive">
                        <option value="null">all</option>
                        <option value="true">active</option>
                        <option value="false">not active</option>
                    </select>
                </div>

                <div class="form-group col-sm-12">
                    <h6>Kategorie (Sterne/Blumen/Sonnen)<small class="btn-link pull-right" ng-click="clearCategoryFilter()">Clear</small></h6>
                    <div class="btn-group">
                        <label class="btn btn-default" ng-model="checkCatModel.1" btn-checkbox>none</label>
                        <label class="btn btn-default" ng-model="checkCatModel.2" btn-checkbox>1</label>
                        <label class="btn btn-default" ng-model="checkCatModel.3" btn-checkbox>2</label>
                        <label class="btn btn-default" ng-model="checkCatModel.4" btn-checkbox>3</label>
                        <label class="btn btn-default" ng-model="checkCatModel.5" btn-checkbox>4</label>
                        <label class="btn btn-default" ng-model="checkCatModel.6" btn-checkbox>5</label>
                    </div>
                </div>

                @*<div class="form-group col-sm-12 hidden-xs">
                    <h6>Meereshöhe </h6>
                    <div range-slider min="0" max="100" model-min="range.min" model-max="range.max"></div>

                </div>*@
   
                <div class="form-group col-sm-6 hidden-xs" style="padding-right: 2px">
                    <h6>Ausstattung<small class="btn-link pull-right" ng-click="clearAusstattungFilter()">Clear</small></h6>
                    <div class="btn-group-vertical">
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.1" btn-checkbox>Group-friendly</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.2" btn-checkbox>Meeting rooms</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.3" btn-checkbox>Swimming pool</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.4" btn-checkbox>Sauna</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.5" btn-checkbox>Garage</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.6" btn-checkbox>Pick-up service</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.7" btn-checkbox>WLAN</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.8" btn-checkbox>Barrier-free</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.9" style="white-space: normal;" btn-checkbox>Special menus for allergy sufferers</label>
                        <label class="btn btn-sm btn-default" ng-model="checkFeatModel.10" btn-checkbox>Pets welcome</label>

                        @*<label class="btn btn-sm btn-default" ng-model="checkFeatModel.11" btn-checkbox>Gruppenfreundlich</label>*@
                    </div>

                    <h6>Badge<small class="btn-link pull-right" ng-click="clearBadgeFilter()">Clear</small></h6>
                    <div class="btn-group-vertical">
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.1" btn-checkbox>Wellnesshotel</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.2" btn-checkbox>Familienhotel</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.3" btn-checkbox>Bikehotel</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.4" btn-checkbox>Bauernhof</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.5" btn-checkbox>Südtiro Für Alle</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.6" btn-checkbox>Wanderhotel</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.7" btn-checkbox>Südtirol Privat</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.8" btn-checkbox>Vinum Hotel</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.9" style="white-space: normal;" btn-checkbox>Sustainability Level 1</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.10" style="white-space: normal;" btn-checkbox>Sustainability Level 2</label>
                        <label class="btn btn-sm btn-default" ng-model="checkBadgeModel.11" style="white-space: normal;" btn-checkbox>Sustainability Level 3</label>
                    </div>
                </div>

                <div class="form-group col-sm-6 hidden-xs" style="padding-left: 2px">
                    <h6>Themen<small class="btn-link pull-right" ng-click="clearThemeFilter()">Clear</small></h6>
                    <div class="btn-group-vertical">
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.1" btn-checkbox>For gourmets</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.2" btn-checkbox>At altitude</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.3" style="white-space: normal;" btn-checkbox>Regional wellness offerings</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.4" style="white-space: normal;" btn-checkbox>South Tyrol on two wheels</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.5" btn-checkbox>With family</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.6" btn-checkbox>Hiking</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.7" style="white-space: normal;" btn-checkbox>In the vineyards</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.8" btn-checkbox>Urban vibe</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.9" style="white-space: normal;" btn-checkbox>At the ski resort</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.10" style="white-space: normal;" btn-checkbox>Mediterranean South Tyrol</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.11" btn-checkbox>In the Dolomites</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.12" style="white-space: normal;" btn-checkbox>Alpine South Tyrol</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.13" btn-checkbox>Small & charming</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.14" style="white-space: normal;" btn-checkbox>Huts & mountain inns</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.15" style="white-space: normal;" btn-checkbox>Rural way of life</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.16" btn-checkbox>Bonus Vacanze</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.17" btn-checkbox>Christmas markets</label>
                        <label class="btn btn-sm btn-default" ng-model="checkThemeModel.18" btn-checkbox>Sustainability</label>
                    </div>
                </div>

                <div class="form-group col-sm-12">
                    <br />
                        <input type="button" id="filterbutton" ng-click="applyFilter()" class="btn btn-info" value="Filter" />
                        <input type="button" id="clearfilterbutton" ng-click="clearFilter()" class="btn btn-default" value="Clear" />
                        <br />
                        <br />
                    </div>
            </div>

        </div>

        <div class="col-sm-9 table-responsive">
            @*<div class="pull-left">
                    <a ng-click="editaccommodation('new')" class="btn btn-small btn-success">New</a>
                </div>*@
            <table class="table table-striped table-condensed">
                <thead>
                    <tr>
                        <th style="min-width: 80px;">Bild</th>
                        <th style="min-width: 80px;">Name</th>
                        @*<th style="min-width: 80px;">Badges</th>*@
                        <th style="min-width: 80px;">Kategorie</th>
                        <th style="min-width: 80px;">Typ</th>
                        <th style="min-width: 80px;">Region/Ort/Fraktion</th>
                        <th style="min-width: 80px;">active on source</th>
                        <th style="min-width: 80px;">active in ODH</th>
                        <th style="min-width:20px;"> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="accommodation in accommodations | filter:query">
                        <td>
                            <div align="left">
                                <img class="img-thumbnail" style="max-height:150px;max-width:150px" ng-src="{{  accommodation.ImageGallery[0] != NULL && accommodation.ImageGallery[0].ImageUrl + '&W=150&H=150' || '../img/noimage.png' }}" @*ng-hide="activity.ImageGallery[0] == NULL"*@ title="{{ accommodation.ImageGallery[0].ImageDesc['de']}}" ng-click="showInfoModal(accommodation)" />
                            </div>
                        </td>
                        @*<td>{{ activity.Id }}</td>*@
                        <td>{{ accommodation.AccoDetail[lang].Name }}</td>
                        @*<td>

                            </td>*@
                        <td>
                            <img ng-src="../img/acco/{{accommodation.AccoCategoryId}}.png">
                            <div ng-repeat="badge in accommodation.BadgeIds">
                                <img ng-src="../img/acco/{{badge}}.png" style="width:45px">
                            </div>
                        </td>
                        <td>{{ accommodation.AccoTypeId }}</td>
                        <td>{{ accommodation.LocationInfo.RegionInfo.Name[lang] }} / {{ accommodation.LocationInfo.TvInfo.Name[lang] }} / {{ accommodation.LocationInfo.DistrictInfo.Name[lang] }}</td>
                        <td>
                            <div class="glyphicon glyphicon-ok" ng-show="accommodation.Active"></div>
                            <div class="glyphicon glyphicon-remove" ng-show="accommodation.Active == false"></div>
                        </td>
                        <td>
                            <div class="glyphicon glyphicon-ok" ng-show="accommodation.SmgActive" style="color:green"></div>
                            <div class="glyphicon glyphicon-remove" ng-show="accommodation.SmgActive == false" style="color:red"></div>
                        </td>
                        @*<td>
                                <a ng-click="editaccommodation(accommodation)" class="btn btn-small btn-warning">edit</a>
                                <br />
                                <a ng-click="deleteaaccommodation(accommodation.Id)" class="btn btn-small btn-danger">delete</a>
                            </td>*@
                        <td>
                            <div ng-show="accommodation.MssResponseShort[0] != null">
                                <a @*ng-click="deleteaaccommodation(accommodation.Id)"*@ class="btn btn-small btn-success" ng-click="showBookingInfo(accommodation, accommodation.MssResponseShort[0].ChannelID)">online buchen</a>
                                <h4>ab {{ accommodation.MssResponseShort[0].CheapestOfferString }} €</h4>
                                <img ng-src="../img/acco/{{ accommodation.MssResponseShort != null && accommodation.MssResponseShort[0].ChannelID || 'null'}}.gif" ng-show="accommodation.MssResponseShort[0].ChannelID != ''">



                            </div>

                        </td>
                    </tr>
                </tbody>
            </table>
            @*<div class="pull-left">
                    <a ng-click="editaccommodation('new')" class="btn btn-small btn-info">New</a>
                </div>*@
        </div>
    </div>


    <script type="text/ng-template" id="myAccommodationInfoModal.html">
        <div class="modal-header">
            <button type="button" class="close" ng-click="cancelslidemodal()" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Accommodation Info</h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-sm-6">
                    <div>
                        <carousel interval="myInterval">
                            <slide data-ng-repeat="slide in slides" active="slide.active">
                                <img data-ng-src="{{slide.ImageUrl + '&H=320'}}" style="margin:auto;max-width:420px" class="img-rounded">
                                <div class="carousel-caption">
                                    <h4>{{slide.ImageTitle[lang]}}</h4>
                                    <p>{{slide.ImageDesc[lang]}}</p>
                                </div>
                            </slide>
                        </carousel>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div style="max-width:420px;height:320px">
                        <leaflet lf-center="leafletcoords" max-width="420px" height="320px"></leaflet>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">

                    <br />
                    @*<p>{{ accommodation.Latitude }} hallo</p>*@
                    <h2>{{ accommodation.AccoDetail[lang].Name }}</h2>
                    <h4>{{ accommodation.LocationInfo.TvInfo.Name[lang] }} - {{ accommodation.LocationInfo.RegionInfo.Name[lang] }}</h4>

                    <p ng-show="accommodation.AccoDetail[lang].NameAddition != ''">
                        <strong>Ansprechpartner</strong><br />
                        {{ accommodation.AccoDetail[lang].NameAddition }}
                    </p>

                    <div ng-show="accommodation.AccoDetail[lang].Shortdesc != ''">
                        <strong>Kurztext html</strong><br />
                        <p ng-bind-html="accommodation.AccoDetail[lang].Shortdesc"></p>
                    </div>

                    <div ng-show="accommodation.AccoDetail[lang].Longdesc != ''">
                        <strong>Langtext html</strong><br />
                        <p ng-bind-html="accommodation.AccoDetail[lang].Longdesc"></p>
                    </div>

                    <div ng-show="accommodation.IndependentData != null">
                        <strong>IndependentData</strong>
                        <p ng-bind-html="accommodation.IndependentData.IndependentDescription['de'].Description"></p>                        
                        <a href="{{accommodation.IndependentData.IndependentDescription['de'].BacklinkUrl}}" target="_blank">{{ accommodation.IndependentData.IndependentDescription['de'].BacklinkUrl }}</a>
                    </div>
                </div>
            </div>

            <div class="row" ng-controller="RoomDetailController">

                <div class="splash" ng-show="isAccoDetailloading">
                    <h2>
                        Loading
                    </h2>
                    <span>
                        <i class="fa fa-spinner fa-5x fa-spin active"></i>
                    </span>
                </div>

                <div class="col-sm-12">

                    <h4>Room Infos</h4>

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Zimmername</th>
                                <th>Description</th>
                                <th style="min-width:20%"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="accoroom in accommodationrooms">
                                <td>
                                    {{ accoroom.AccoRoomDetail[lang].Name }} <br />
                                    {{ accoroom.Roomtype }}
                                </td>
                                <td>
                                    <p ng-bind-html="accoroom.AccoRoomDetail[lang].Shortdesc"></p><br />
                                    @*<p ng-bind-html="accoroom.AccoRoomDetail[lang].Longdesc"></p>*@
                                </td>
                                <td>
                                    <carousel interval="myInterval">
                                        <slide data-ng-repeat="roomslide in accoroom.ImageGallery" active="roomslide.active">
                                            <img data-ng-src="{{roomslide.ImageUrl + '&H=150'}}" style="margin:auto;max-width:150px" class="img-rounded">
                                            <div class="carousel-caption">
                                                <h4>{{roomslide.ImageTitle[lang]}}</h4>
                                                <p>{{roomslide.ImageDesc[lang]}}</p>
                                            </div>
                                        </slide>
                                    </carousel>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>

            </div>

            @*<div class="row">
                <div class="col-sm-12" ng-show="activity.OperationscheduleName != null">
                    <h4>Öffnungszeiten</h4>
                    <p>{{ accommodation.OperationscheduleName }}</p>
                    <p>{{ accommodation.Start }} - {{ gastronomy.Stop }}</p>                    
                </div>
            </div>*@
        </div>

        <div class="modal-footer">
            <button class="btn btn-info" ng-click="cancelslidemodal()">Cancel</button>
        </div>
    </script>

    <script type="text/ng-template" id="myBookingModal.html">
        <form name="bookingform">
            <div class="modal-header">
                <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Booking Details</h4>
            </div>
            <div class="modal-body">

                <div class="splash" ng-show="isDetailloading">
                    <h2>
                        Loading
                    </h2>
                    <span>
                        <i class="fa fa-spinner fa-5x fa-spin active"></i>
                    </span>
                </div>

                @*<img ng-src="../../img/acco/{{mssresponse.ChannelID}}.gif" ng-show="mssresponse.ChannelID != ''">*@

                <div class="form-group" ng-repeat="channel in accommodation.MssResponseShort">


                    <div class="pull-left"><img ng-src="../img/acco/{{channel.ChannelID}}.gif" ng-show="mssresponse.ChannelID != ''"></div>
                    <div><h3>&nbsp; ab: {{channel.CheapestOfferString}}</h3></div>


                    <table class="table table-striped table-condensed">
                        <thead>
                            <tr>
                                <th style="width: 15%;">Zimmer</th>
                                <th style="width: 15%;">Typ</th>
                                <th style="width: 25%;">Beschreibung</th>
                                <th style="width: 12%;">Verpflegung</th>
                                <th style="width: 8%;">Preis</th>
                                <th style="width: 15%;"> </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="room in channel.RoomDetails">
                                <td>
                                    {{ room.Roomtitle }}
                                    <div align="left">
                                        <img class="img-thumbnail" style="max-height:150px;max-width:150px" ng-src="{{  room.RoomPictures[0] != NULL && room.RoomPictures[0].Pictureurl || '../img/noimage.png' }}" title="{{ room.Roomtitle }}" @*ng-click="showInfoModal(accommodation)"*@ />
                                    </div>
                                </td>
                                <td>
                                    <span ng-if="room.Roomtype == 1">room</span>
                                    <span ng-if="room.Roomtype == 2">apartment</span>
                                    <span ng-if="room.Roomtype == 3">mobile home</span>
                                    <span ng-if="room.Roomtype == 4">holiday home</span>
                                    <span ng-if="room.Roomtype == 5">bungalow</span>
                                    <span ng-if="room.Roomtype == 6">pitch</span>
                                    <span ng-if="room.Roomtype == 7">tent</span>
                                    <span ng-if="room.Roomtype == 8">dorm</span>
                                    <span ng-if="room.Roomtype == 9">pitch/tent</span>
                                    - {{ room.Roomtype }}
                                </td>
                                <td>{{ room.Roomdesc }}</td>
                                <td>
                                    <span ng-if="room.Price_ws > 0">Ohne Verpflegung:<br /></span>
                                    <span ng-if="room.Price_bb > 0">Bed & Breakfast:<br /></span>
                                    <span ng-if="room.Price_hb > 0">Halbpension:<br /></span>
                                    <span ng-if="room.Price_fb > 0">Vollpension:<br /></span>
                                    <span ng-if="room.Price_ai > 0">All Inclusive:<br /></span>
                                </td>
                                <td>
                                    <span ng-if="room.Price_ws > 0">{{ room.Price_ws }} €<br /></span>
                                    <span ng-if="room.Price_bb > 0">{{ room.Price_bb }} €<br /></span>
                                    <span ng-if="room.Price_hb > 0">{{ room.Price_hb }} €<br /></span>
                                    <span ng-if="room.Price_fb > 0">{{ room.Price_fb }} €<br /></span>
                                    <span ng-if="room.Price_ai > 0">{{ room.Price_ai }} €<br /></span>
                                </td>
                                @*<td>{{ room.TotalPriceString }}</td>*@

                                <td>
                                    <div>
                                        <a class="btn btn-small btn-success" href="{{ channel.Channellink }}" target="_blank">online buchen</a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>


                </div>

            </div>
            <div class="modal-footer">
                <button class="btn btn-info" ng-click="cancel()">Cancel</button>
            </div>
        </form>
    </script>

</div>
@section Styles{
    <style type="text/css">        
        .pull-bottom {
            display: inline-block;
            vertical-align: bottom;
            float: none;
        }
    </style>

    <link rel="stylesheet" href="~/css/angular.rangeSlider.css" />
}

@section Scripts {
    
    @*<script src="~/NgScripts/appfactory.js"></script>*@
    <script src="~/NgScripts/appconfig.js"></script>
    <script src="~/NgScripts/AccommodationController.js"></script>    
}
